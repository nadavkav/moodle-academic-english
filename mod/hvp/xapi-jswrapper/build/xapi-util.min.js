!function(a){var b=a,c=!1;"undefined"!=typeof window&&(b=window.ADL=a.ADL||{},c=!0);var d=function(a){return a.definition&&a.definition.name?b.xapiutil.getLangVal(a.definition.name):void 0},e=function(a){if("SubStatement"===a.objectType&&"SubStatement"!==a.object.objectType&&!(a.id||a.stored||a.version||a.authority)){var c=b.xapiutil.getActorId(a.actor)+":"+b.xapiutil.getVerbDisplay(a.verb)+":"+b.xapiutil.getObjectId(a.object);return c}};b.xapiutil={},b.xapiutil.getLang=function(){var a;if("undefined"!=typeof navigator)a=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;else if(process&&process.env){var b=process.env.LANG;a=b.slice(0,b.indexOf(".")),a=a.replace(/_/,"-")}return a||"en-US"},b.xapiutil.getLangVal=function(a){if(a){var c=Object.keys(a);if(0!=c.length){var d,e=b.xapiutil.getLang(),f=!1;do a[e]?(d=a[e],f=!0):e.indexOf("-")&&(e=e.substring(0,e.lastIndexOf("-")));while(!f&&""!==e);return d}}},b.xapiutil.getMoreStatements=function(a,d,e){if(!c)throw new Error("Node not supported.");var f=[];b.XAPIWrapper.getStatements(e,null,function g(c){if(c&&c.response){var h=JSON.parse(c.response);h.statements&&(f=f.concat(h.statements),a--<=0?d(f):h.more&&""!==h.more?b.XAPIWrapper.getStatements(e,h.more,g):""===h.more&&d(f))}})},b.xapiutil.getActorId=function(a){return a.mbox||a.openid||a.mbox_sha1sum||a.account},b.xapiutil.getActorIdString=function(a){var b=a.mbox||a.openid||a.mbox_sha1sum;return b||(b=a.account?a.account.homePage+":"+a.account.name:a.member?"Anon Group "+a.member:"unknown"),b},b.xapiutil.getActorDisplay=function(a){return a.name||b.xapiutil.getActorIdString(a)},b.xapiutil.getVerbDisplay=function(a){return a?a.display?b.xapiutil.getLangVal(a.display)||a.id:a.id:void 0},b.xapiutil.getObjectType=function(a){return a.objectType||(a.id?"Activity":"Agent")},b.xapiutil.getObjectId=function(a){if(a.id)return a.id;var c=b.xapiutil.getObjectType(a);return"Agent"===c||"Group"===c?b.xapiutil.getActorId(a):void 0},b.xapiutil.getObjectIdString=function(a){if(!a)return"unknown";if(a.id)return a.id;var c=b.xapiutil.getObjectType(a);return"Agent"===c||"Group"===c?b.xapiutil.getActorIdString(a):"SubStatement"==c?e(a):"unknown"},b.xapiutil.getObjectDisplay=function(a){if(!a)return"unknown";var c=d(a)||a.name||a.id;if(!c){var f=b.xapiutil.getObjectType(a);"Agent"===f||"Group"==f?c=b.xapiutil.getActorDisplay(a):"SubStatement"==f&&(c=e(a))}return c}}(this);